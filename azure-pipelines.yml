trigger:
  - main

pool:
  name: bank-pool

steps:
  - checkout: self

  # - task: UsePythonVersion@0
  #   inputs:
  #     versionSpec: "3.10"
  #   displayName: Use Python 3.10
  - script: |
      python3 --version
    displayName: Verify Python

  - script: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt
    displayName: Install dependencies

  - script: |
      export PYTHONPATH=$(pwd)
      python3 -m pytest -v "not db"
    displayName: Run tests (skip DB)
